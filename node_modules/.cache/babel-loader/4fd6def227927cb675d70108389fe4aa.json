{"ast":null,"code":"import _toConsumableArray from\"C:/Users/Yura/Documents/GitHub/weather_dev/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/Yura/Documents/GitHub/weather_dev/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import PostServis from'../PostService';import'./search.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Search=function Search(props){// console.log(props.props[\"place\"]);\n// console.log(props.props[\"newPlace\"]);\nvar _useState=useState(\"Enter city...\"),_useState2=_slicedToArray(_useState,2),value=_useState2[0],setValue=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];function submitHandler(event){event.preventDefault();findTown(value);setValue(\"Enter city...\");}function findTown(name){if(name.trim()){var _findTown=PostServis.getTownFind(name.trim()).then(function(data){if(data){setError(null);}props.setCurrentPlace(value.trim());var allDataTowm=data;// console.log(allDataTowm);\nvar towninfo={name:data.name,zip:data.id,lon:data.coord.lon,lat:data.coord.lat,add:true};var newPlacesArr=[].concat(_toConsumableArray(props.newPlaces),[towninfo]);props.setNewPlaces(newPlacesArr);props.setLocalStore('newPlaces',newPlacesArr);return allDataTowm;}).catch(function(err){// what now?\n//https://medium.com/nuances-of-programming/%D0%BE%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0-%D0%BE%D1%88%D0%B8%D0%B1%D0%BE%D0%BA-api-%D0%B2-%D0%B2%D0%B5%D0%B1-%D0%BF%D1%80%D0%B8%D0%BB%D0%BE%D0%B6%D0%B5%D0%BD%D0%B8%D0%B8-%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D1%83%D1%8F-axios-932e9d66a526\n// console.log(err.response.data.cod);\n// console.log(err.response.data.message);\nif(err.response.data.cod===\"404\"){setError(err.response.data.message);setValue(\"Enter city...\");}else{setValue(\"Enter city...\");setError(null);}});setValue(\"Enter city...\");}}return/*#__PURE__*/_jsxs(\"div\",{className:\" container navbar navbar-expand-lg navbar-light bg-light navbarS \",children:[/*#__PURE__*/_jsxs(\"form\",{className:\"d-flex\",onSubmit:submitHandler,children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-control me-sm-2\",value:value,onFocus:function onFocus(event){return event.target.value=\"\";},onChange:function onChange(event){setValue(event.target.value);}}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary my-2 my-sm-0\",type:\"submit\",onClick:function onClick(){// setValue(\"Enter city...\")\n},children:\"Search\"})]}),error?/*#__PURE__*/_jsx(\"h3\",{style:{color:'red'},children:error}):false]});};export default Search;","map":{"version":3,"names":["React","useState","PostServis","Search","props","value","setValue","error","setError","submitHandler","event","preventDefault","findTown","name","trim","getTownFind","then","data","setCurrentPlace","allDataTowm","towninfo","zip","id","lon","coord","lat","add","newPlacesArr","newPlaces","setNewPlaces","setLocalStore","catch","err","response","cod","message","target","color"],"sources":["C:/Users/Yura/Documents/GitHub/weather_dev/src/components/Search/Search.jsx"],"sourcesContent":["import React, { useState } from 'react'\nimport PostServis from '../PostService';\nimport './search.css'\n\nconst Search = (props) => {\n    // console.log(props.props[\"place\"]);\n    // console.log(props.props[\"newPlace\"]);\n\n    const [value, setValue] = useState(\"Enter city...\");\n    const [error, setError] = useState(null)\n\n    function submitHandler(event) {\n        event.preventDefault();\n        findTown(value)\n        setValue(\"Enter city...\")\n    }\n\n    function findTown(name) {\n        if (name.trim()) {\n            const findTown = PostServis.getTownFind(name.trim())\n                .then((data) => {\n                    if (data) {\n                        setError(null)\n                    }\n\n                    props.setCurrentPlace(value.trim())\n\n                    let allDataTowm = data\n                    // console.log(allDataTowm);\n\n                    let towninfo = {\n                        name: data.name,\n                        zip: data.id,\n                        lon: data.coord.lon,\n                        lat: data.coord.lat,\n                        add: true\n                    }\n                    let newPlacesArr = [...props.newPlaces, towninfo]\n                    props.setNewPlaces(newPlacesArr)\n                    props.setLocalStore('newPlaces', newPlacesArr)\n                    return allDataTowm\n                })\n                .catch(err => {\n                    // what now?\n                    //https://medium.com/nuances-of-programming/%D0%BE%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0-%D0%BE%D1%88%D0%B8%D0%B1%D0%BE%D0%BA-api-%D0%B2-%D0%B2%D0%B5%D0%B1-%D0%BF%D1%80%D0%B8%D0%BB%D0%BE%D0%B6%D0%B5%D0%BD%D0%B8%D0%B8-%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D1%83%D1%8F-axios-932e9d66a526\n                    // console.log(err.response.data.cod);\n                    // console.log(err.response.data.message);\n                    if (err.response.data.cod === \"404\") {\n                        setError(err.response.data.message)\n                        setValue(\"Enter city...\")\n                    } else {\n                        setValue(\"Enter city...\")\n                        setError(null)\n                    }\n                })\n            setValue(\"Enter city...\");\n        }\n    }\n\n    return (\n        <div className=' container navbar navbar-expand-lg navbar-light bg-light navbarS '>\n            <form className='d-flex' onSubmit={submitHandler}>\n                <input className='form-control me-sm-2' value={value}\n                    onFocus={(event) => (event.target.value = \"\")}\n                    onChange={(event) => {\n                        setValue(event.target.value)\n                    }}\n                />\n                <button className='btn btn-secondary my-2 my-sm-0'\n                    type=\"submit\"\n                    onClick={() => {\n                        // setValue(\"Enter city...\")\n                    }}>Search</button>\n            </form>\n            {error ? <h3 style={{ color: 'red' }} >{error}</h3> : false}\n        </div >\n    )\n}\n\nexport default Search\n\n\n"],"mappings":"wQAAA,MAAOA,MAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,MAAOC,WAAP,KAAuB,gBAAvB,CACA,MAAO,cAAP,C,wFAEA,GAAMC,OAAM,CAAG,QAATA,OAAS,CAACC,KAAD,CAAW,CACtB;AACA;AAEA,cAA0BH,QAAQ,CAAC,eAAD,CAAlC,wCAAOI,KAAP,eAAcC,QAAd,eACA,eAA0BL,QAAQ,CAAC,IAAD,CAAlC,yCAAOM,KAAP,eAAcC,QAAd,eAEA,QAASC,cAAT,CAAuBC,KAAvB,CAA8B,CAC1BA,KAAK,CAACC,cAAN,GACAC,QAAQ,CAACP,KAAD,CAAR,CACAC,QAAQ,CAAC,eAAD,CAAR,CACH,CAED,QAASM,SAAT,CAAkBC,IAAlB,CAAwB,CACpB,GAAIA,IAAI,CAACC,IAAL,EAAJ,CAAiB,CACb,GAAMF,UAAQ,CAAGV,UAAU,CAACa,WAAX,CAAuBF,IAAI,CAACC,IAAL,EAAvB,EACZE,IADY,CACP,SAACC,IAAD,CAAU,CACZ,GAAIA,IAAJ,CAAU,CACNT,QAAQ,CAAC,IAAD,CAAR,CACH,CAEDJ,KAAK,CAACc,eAAN,CAAsBb,KAAK,CAACS,IAAN,EAAtB,EAEA,GAAIK,YAAW,CAAGF,IAAlB,CACA;AAEA,GAAIG,SAAQ,CAAG,CACXP,IAAI,CAAEI,IAAI,CAACJ,IADA,CAEXQ,GAAG,CAAEJ,IAAI,CAACK,EAFC,CAGXC,GAAG,CAAEN,IAAI,CAACO,KAAL,CAAWD,GAHL,CAIXE,GAAG,CAAER,IAAI,CAACO,KAAL,CAAWC,GAJL,CAKXC,GAAG,CAAE,IALM,CAAf,CAOA,GAAIC,aAAY,8BAAOvB,KAAK,CAACwB,SAAb,GAAwBR,QAAxB,EAAhB,CACAhB,KAAK,CAACyB,YAAN,CAAmBF,YAAnB,EACAvB,KAAK,CAAC0B,aAAN,CAAoB,WAApB,CAAiCH,YAAjC,EACA,MAAOR,YAAP,CACH,CAtBY,EAuBZY,KAvBY,CAuBN,SAAAC,GAAG,CAAI,CACV;AACA;AACA;AACA;AACA,GAAIA,GAAG,CAACC,QAAJ,CAAahB,IAAb,CAAkBiB,GAAlB,GAA0B,KAA9B,CAAqC,CACjC1B,QAAQ,CAACwB,GAAG,CAACC,QAAJ,CAAahB,IAAb,CAAkBkB,OAAnB,CAAR,CACA7B,QAAQ,CAAC,eAAD,CAAR,CACH,CAHD,IAGO,CACHA,QAAQ,CAAC,eAAD,CAAR,CACAE,QAAQ,CAAC,IAAD,CAAR,CACH,CACJ,CAnCY,CAAjB,CAoCAF,QAAQ,CAAC,eAAD,CAAR,CACH,CACJ,CAED,mBACI,aAAK,SAAS,CAAC,mEAAf,wBACI,cAAM,SAAS,CAAC,QAAhB,CAAyB,QAAQ,CAAEG,aAAnC,wBACI,cAAO,SAAS,CAAC,sBAAjB,CAAwC,KAAK,CAAEJ,KAA/C,CACI,OAAO,CAAE,iBAACK,KAAD,QAAYA,MAAK,CAAC0B,MAAN,CAAa/B,KAAb,CAAqB,EAAjC,EADb,CAEI,QAAQ,CAAE,kBAACK,KAAD,CAAW,CACjBJ,QAAQ,CAACI,KAAK,CAAC0B,MAAN,CAAa/B,KAAd,CAAR,CACH,CAJL,EADJ,cAOI,eAAQ,SAAS,CAAC,gCAAlB,CACI,IAAI,CAAC,QADT,CAEI,OAAO,CAAE,kBAAM,CACX;AACH,CAJL,oBAPJ,GADJ,CAcKE,KAAK,cAAG,WAAI,KAAK,CAAE,CAAE8B,KAAK,CAAE,KAAT,CAAX,UAA+B9B,KAA/B,EAAH,CAAgD,KAd1D,GADJ,CAkBH,CAzED,CA2EA,cAAeJ,OAAf"},"metadata":{},"sourceType":"module"}