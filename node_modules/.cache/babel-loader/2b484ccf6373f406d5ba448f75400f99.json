{"ast":null,"code":"import _toConsumableArray from\"C:/Users/Yura/Documents/GitHub/weather_dev/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/Yura/Documents/GitHub/weather_dev/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import MyModal from'../Modal/MyModal';import PostServis from'../PostService';import'./search.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Search=function Search(props){// console.log(props.props[\"place\"]);\n// console.log(props.props[\"newPlace\"]);\nvar _useState=useState(\"Enter city...\"),_useState2=_slicedToArray(_useState,2),value=_useState2[0],setValue=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),activeModal=_useState6[0],setActiveModal=_useState6[1];function submitHandler(event){event.preventDefault();findTown(value);setValue(\"Enter city...\");}function findTown(name){if(name.trim()){var _findTown=PostServis.getTownFind(name.trim()).then(function(data){console.log(data);if(data){setError(null);}props.setCurrentPlace(value.trim());var allDataTowm=data;var towninfo={name:data.name,zip:data.id,lon:data.coord.lon,lat:data.coord.lat,add:true};var newPlacesArr=[].concat(_toConsumableArray(props.newPlaces),[towninfo]);props.setNewPlaces(newPlacesArr);props.setLocalStore('newPlaces',newPlacesArr);return allDataTowm;}).catch(function(err){// what now?\n//https://medium.com/nuances-of-programming/%D0%BE%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0-%D0%BE%D1%88%D0%B8%D0%B1%D0%BE%D0%BA-api-%D0%B2-%D0%B2%D0%B5%D0%B1-%D0%BF%D1%80%D0%B8%D0%BB%D0%BE%D0%B6%D0%B5%D0%BD%D0%B8%D0%B8-%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D1%83%D1%8F-axios-932e9d66a526\n// console.log(err.response.data.cod);\n// console.log(err.response.data.message);\nif(err.response.data.cod===\"404\"){setError(err.response.data.message);setValue(\"Enter city...\");}else{setValue(\"Enter city...\");setError(null);}});setValue(\"Enter city...\");}}return/*#__PURE__*/_jsxs(\"div\",{className:\" container navbar navbar-expand-lg navbar-light bg-light navbarS \",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-warning\",onClick:function onClick(){setActiveModal(true);console.log(activeModal);},children:\"ToDos\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"d-flex\",onSubmit:submitHandler,children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-control me-sm-2\",value:value,onFocus:function onFocus(event){return event.target.value=\"\";},onChange:function onChange(event){setValue(event.target.value);}}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary my-2 my-sm-0\",type:\"submit\",children:\"Search\"})]}),error?/*#__PURE__*/_jsx(\"h3\",{style:{color:'red'},children:error}):false,/*#__PURE__*/_jsx(MyModal,{activeModal:activeModal,setActiveModal:setActiveModal})]});};export default Search;","map":{"version":3,"names":["React","useState","MyModal","PostServis","Search","props","value","setValue","error","setError","activeModal","setActiveModal","submitHandler","event","preventDefault","findTown","name","trim","getTownFind","then","data","console","log","setCurrentPlace","allDataTowm","towninfo","zip","id","lon","coord","lat","add","newPlacesArr","newPlaces","setNewPlaces","setLocalStore","catch","err","response","cod","message","target","color"],"sources":["C:/Users/Yura/Documents/GitHub/weather_dev/src/components/Search/Search.jsx"],"sourcesContent":["import React, { useState } from 'react'\nimport MyModal from '../Modal/MyModal';\nimport PostServis from '../PostService';\nimport './search.css'\n\nconst Search = (props) => {\n    // console.log(props.props[\"place\"]);\n    // console.log(props.props[\"newPlace\"]);\n\n    const [value, setValue] = useState(\"Enter city...\");\n    const [error, setError] = useState(null)\n    const [activeModal, setActiveModal] = useState(false)\n\n    function submitHandler(event) {\n        event.preventDefault();\n        findTown(value)\n        setValue(\"Enter city...\")\n    }\n\n    function findTown(name) {\n        if (name.trim()) {\n            const findTown = PostServis.getTownFind(name.trim())\n                .then((data) => {\n                    console.log(data);\n                    if (data) {\n                        setError(null)\n                    }\n\n                    props.setCurrentPlace(value.trim())\n\n                    let allDataTowm = data\n\n                    let towninfo = {\n                        name: data.name,\n                        zip: data.id,\n                        lon: data.coord.lon,\n                        lat: data.coord.lat,\n                        add: true\n                    }\n                    let newPlacesArr = [...props.newPlaces, towninfo]\n                    props.setNewPlaces(newPlacesArr)\n                    props.setLocalStore('newPlaces', newPlacesArr)\n                    return allDataTowm\n                })\n                .catch(err => {\n                    // what now?\n                    //https://medium.com/nuances-of-programming/%D0%BE%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0-%D0%BE%D1%88%D0%B8%D0%B1%D0%BE%D0%BA-api-%D0%B2-%D0%B2%D0%B5%D0%B1-%D0%BF%D1%80%D0%B8%D0%BB%D0%BE%D0%B6%D0%B5%D0%BD%D0%B8%D0%B8-%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D1%83%D1%8F-axios-932e9d66a526\n                    // console.log(err.response.data.cod);\n                    // console.log(err.response.data.message);\n                    if (err.response.data.cod === \"404\") {\n                        setError(err.response.data.message)\n                        setValue(\"Enter city...\")\n                    } else {\n                        setValue(\"Enter city...\")\n                        setError(null)\n                    }\n                })\n            setValue(\"Enter city...\");\n        }\n    }\n\n    return (\n        <div className=' container navbar navbar-expand-lg navbar-light bg-light navbarS '>\n            <button className='btn btn-warning' onClick={() => {\n                setActiveModal(true)\n                console.log(activeModal)\n\n            }}>ToDos</button>\n            <form className='d-flex' onSubmit={submitHandler}>\n                <input className='form-control me-sm-2' value={value}\n                    onFocus={(event) => (event.target.value = \"\")}\n                    onChange={(event) => {\n                        setValue(event.target.value)\n                    }}\n                />\n                <button className='btn btn-secondary my-2 my-sm-0' type=\"submit\">Search</button>\n            </form>\n            {error ? <h3 style={{ color: 'red' }} >{error}</h3> : false}\n\n\n\n            <MyModal activeModal={activeModal} setActiveModal={setActiveModal} />\n        </div >\n    )\n}\n\nexport default Search\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}